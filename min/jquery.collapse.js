!function(e){function n(n,s){s=s||{};var i=this,o=s.query||"> :even";e.extend(i,{$el:n,options:s,sections:[],isAccordion:s.accordion||!1,db:!!s.persist&&jQueryCollapseStorage(n[0].id)}),i.states=i.db?i.db.read():[],i.$el.find(o).each(function(){var n=new t(e(this),i);i.sections.push(n);var s=i.states[n._index()];0===s&&n.$summary.removeClass("open"),1===s&&n.$summary.addClass("open"),n.$summary.hasClass("open")?n.open(!0):n.close(!0)}),function(n){i.$el.on("click","[data-collapse-summary]",e.proxy(i.handleClick,n))}(i)}function t(n,t){e.extend(this,{isOpen:!1,$summary:n.attr("data-collapse-summary","").wrapInner('<a href="#"/>'),$details:n.next(),options:t.options,parent:t})}n.prototype={handleClick:function(n){n.preventDefault();for(var t=this.sections,s=t.length;s--;)if(e.contains(t[s].$summary[0],n.target)){t[s].toggle();break}},open:function(n){if(isFinite(n))return this.sections[n].open();e.each(this.sections,function(){this.open()})},close:function(n){if(isFinite(n))return this.sections[n].close();e.each(this.sections,function(){this.close()})}},t.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(e){this._changeState("close",e)},open:function(n){var t=this;t.options.accordion&&!n&&e.each(t.parent.sections,function(){this.close()}),t._changeState("open",n)},_index:function(){return e.inArray(this,this.parent.sections)},_changeState:function(n,t){var s=this;s.isOpen="open"==n,e.isFunction(s.options[n])&&!t?s.options[n].apply(s.$details):s.isOpen?s.$details.show():s.$details.hide(),s.$summary.removeClass("open close").addClass(n),s.$details.attr("aria-hidden","close"==n),s.parent.$el.trigger(n,s),s.parent.db&&s.parent.db.write(s._index(),s.isOpen)}},e.fn.extend({collapse:function(n,t){return(t?e("body").find("[data-collapse]"):e(this)).each(function(){var s=t?{}:n,i=e(this).attr("data-collapse")||"";e.each(i.split(" "),function(e,n){n&&(s[n]=!0)}),new jQueryCollapse(e(this),s)})}}),e(function(){e.fn.collapse(!1,!0)}),jQueryCollapse=n}(window.jQuery);